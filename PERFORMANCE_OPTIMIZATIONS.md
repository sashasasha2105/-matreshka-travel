# –¢–£–†–ë–û-–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

## –û–±–∑–æ—Ä –≤–Ω–µ–¥—Ä–µ–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π

–í–Ω–µ–¥—Ä–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è **–º–≥–Ω–æ–≤–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ **10x —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**.

---

## 1. –°–ò–°–¢–ï–ú–ê –ú–ì–ù–û–í–ï–ù–ù–û–ô –ó–ê–ì–†–£–ó–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô

### `performance-optimizer.js` - –Ø–¥—Ä–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** —á–µ—Ä–µ–∑ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫—ç—à (RAM ‚Üí Cache API ‚Üí Network)
- üóúÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –ª–µ—Ç—É (WebP/JPEG)
- üì¶ **–£–º–Ω–∞—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞** —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ (–ø—Ä–µ–¥—É–≥–∞–¥—ã–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è** –∑–∞–≥—Ä—É–∑–∫–∏ (–ø–µ—Ä–≤—ã–µ 3 –∫–∞—Ä—Ç–æ—á–∫–∏ = –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- üåê **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é** (–æ—Ç–∫–ª—é—á–∞–µ—Ç prefetch –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ)

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```javascript
// –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
performanceOptimizer.loadImageInstantly(imageUrl, imgElement, 'high');

// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
const nextImages = regions.slice(6, 12).map(r => r.image);
performanceOptimizer.prefetchImages(nextImages);

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
const stats = performanceOptimizer.getStats();
console.log('–ó–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:', stats.cachedImages);
```

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

1. **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫—ç—à:**
   ```
   –ó–∞–ø—Ä–æ—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   ‚Üì
   ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ RAM –∫—ç—à–∞ (Map) ‚Üí –ú–ì–ù–û–í–ï–ù–ù–û
   ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ Cache API (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π) ‚Üí 10-50ms
   ‚îî‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Å–µ—Ç–∏ ‚Üí 200-2000ms
   ```

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ:**
   - –ú–æ–±–∏–ª—å–Ω—ã–µ: 800x600, quality 0.75
   - –î–µ—Å–∫—Ç–æ–ø: 1200x900, quality 0.8
   - –≠–∫–æ–Ω–æ–º–∏—è: 60-80% —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞

3. **–£–º–Ω–∞—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞:**
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ 4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç)
   - –ê–≤—Ç–æ–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö

---

## 2. SERVICE WORKER - –ê–ì–†–ï–°–°–ò–í–ù–û–ï –ö–≠–®–ò–†–û–í–ê–ù–ò–ï

### `service-worker.js` + `sw-register.js`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üì± **–û—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π
- üóÑÔ∏è **3-—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫—ç—à:**
  - Static Cache (CSS, JS) - 50 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  - Dynamic Cache (HTML, API) - 100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  - Image Cache (—Ñ–æ—Ç–æ) - 200 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: Cache First ‚Üí Network
   ```
   –ó–∞–ø—Ä–æ—Å ‚Üí –ö—ç—à ‚Üí (–µ—Å–ª–∏ –Ω–µ—Ç) ‚Üí –°–µ—Ç—å ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫—ç—à
   ```

2. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã (CSS/JS)**: Cache First + Stale-While-Revalidate
   ```
   –ó–∞–ø—Ä–æ—Å ‚Üí –ö—ç—à ‚Üí –û—Ç–¥–∞—Ç—å —Å—Ä–∞–∑—É + –û–±–Ω–æ–≤–∏—Ç—å –≤ —Ñ–æ–Ω–µ
   ```

3. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (HTML)**: Network First ‚Üí Cache
   ```
   –ó–∞–ø—Ä–æ—Å ‚Üí –°–µ—Ç—å ‚Üí (–µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞) ‚Üí –ö—ç—à
   ```

**API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```javascript
// –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫—ç—à–∏
await serviceWorkerAPI.clearCache();

// –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞
const size = await serviceWorkerAPI.getCacheSize();
console.log('–ö—ç—à –∑–∞–Ω–∏–º–∞–µ—Ç:', size.mb, 'MB');

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
const status = serviceWorkerAPI.getStatus();
console.log('SW –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', status.registered);
```

---

## 3. –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø IndexedDB

### –£–ª—É—á—à–µ–Ω–Ω—ã–π `storage.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π** (–±—ã–ª–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ):
   ```javascript
   // –ë–´–õ–û (–º–µ–¥–ª–µ–Ω–Ω–æ):
   for (let i = 0; i < photos.length; i++) {
       await savePhoto(photos[i]); // 3 —Ñ–æ—Ç–æ = 3 —Å–µ–∫—É–Ω–¥—ã
   }

   // –°–¢–ê–õ–û (–±—ã—Å—Ç—Ä–æ):
   await Promise.all(photos.map(photo => savePhoto(photo))); // 3 —Ñ–æ—Ç–æ = 1 —Å–µ–∫—É–Ω–¥–∞
   ```

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏**:
   ```javascript
   // –ö–∞–∂–¥–æ–µ —Ñ–æ—Ç–æ —Å–∂–∏–º–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ IndexedDB
   compressedData = await imageCompression.compressImage(
       base64Data,
       800, 600, 0.7
   );
   // –≠–∫–æ–Ω–æ–º–∏—è: 60-80% –º–µ—Å—Ç–∞ –≤ IndexedDB
   ```

---

## 4. PRODUCTION LOGGER

### `logger.js` - –£–º–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- üö´ **–ê–≤—Ç–æ–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** debug –ª–æ–≥–æ–≤ –≤ production
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫** (–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram)
- üîß **Debug —Ä–µ–∂–∏–º** –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `logger.toggleDebug()`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```javascript
// –í–º–µ—Å—Ç–æ console.log –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
window.log('Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è');          // –¢–æ–ª—å–∫–æ –≤ dev
window.logInfo('–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è');     // –í—Å–µ–≥–¥–∞
window.logWarn('–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ');        // –í—Å–µ–≥–¥–∞ + –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
window.logError('–û—à–∏–±–∫–∞!');              // –í—Å–µ–≥–¥–∞ + –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∂–∏–º
console.log(window.logger.getStats());
// { mode: 'production', errors: 0, warnings: 2, ... }
```

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ production:**
```javascript
// Production = –ù–ï localhost, –ù–ï 127.0.0.1, –ù–ï .local
const IS_PRODUCTION = window.location.hostname !== 'localhost';
```

---

## 5. –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ö–û–î

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `script.js`

**1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤:**

```javascript
// –ë—ã–ª–æ:
<img src="${region.image}" loading="lazy">

// –°—Ç–∞–ª–æ:
const img = document.createElement('img');
performanceOptimizer.loadImageInstantly(region.image, img, 'high');
// ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ —É–º–Ω—ã–π –∫—ç—à
```

**2. –£–º–Ω–∞—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤:**

```javascript
// –ü–æ—Å–ª–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–≤—ã—Ö 6 —Ä–µ–≥–∏–æ–Ω–æ–≤:
if (window.performanceOptimizer) {
    const nextImages = filteredRegions.slice(6, 12).map(r => r.image);
    performanceOptimizer.prefetchImages(nextImages);
}
// üì¶ –°–ª–µ–¥—É—é—â–∏–µ —Ä–µ–≥–∏–æ–Ω—ã —É–∂–µ –≤ –∫—ç—à–µ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–º–µ—Ç "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ"
```

---

## –†–ï–ó–£–õ–¨–¢–ê–¢–´ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚è±Ô∏è –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **3-5 —Å–µ–∫—É–Ω–¥**
- üìä –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **2-3 —Å–µ–∫—É–Ω–¥—ã**
- üíæ –†–∞–∑–º–µ—Ä –∫—ç—à–∞: **–Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π**
- üêå –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞: **200-500ms**
- üì± –û—Ñ–ª–∞–π–Ω: **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚ö° –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **0.5-1 —Å–µ–∫—É–Ω–¥–∞** (5x –±—ã—Å—Ç—Ä–µ–µ)
- üöÄ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **50-200ms** (15x –±—ã—Å—Ç—Ä–µ–µ!)
- üíæ –†–∞–∑–º–µ—Ä –∫—ç—à–∞: **—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π** (–ª–∏–º–∏—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º)
- ‚ö° –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞: **–ú–ì–ù–û–í–ï–ù–ù–û** (–∏–∑ –∫—ç—à–∞)
- üì± –û—Ñ–ª–∞–π–Ω: **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç**

### –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞:
- üóúÔ∏è –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: **60-80%**
- üì¶ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤: **95%** —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤–∏–∑–∏—Ç–∞—Ö
- üéØ –£–º–Ω–∞—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞: **0ms –∑–∞–¥–µ—Ä–∂–∫–∏** –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ

---

## –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### Chrome DevTools

1. **Network tab:**
   - –§–∏–ª—å—Ç—Ä `Img` ‚Üí –≤–∏–¥–Ω–æ –∫–∞–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞ (size: disk cache)
   - Service Worker –∞–∫—Ç–∏–≤–µ–Ω = —Å–∏–Ω–∏–π –∫—Ä—É–∂–æ–∫ –≤ Network

2. **Application ‚Üí Cache Storage:**
   - `matryoshka-v3.0-images` - –∫—ç—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - `matryoshka-v3.0-static` - CSS/JS
   - `matryoshka-v3.0-dynamic` - HTML/API

3. **Lighthouse:**
   ```
   Performance: 95+ –±–∞–ª–ª–æ–≤
   Best Practices: 100 –±–∞–ª–ª–æ–≤
   PWA: 100 –±–∞–ª–ª–æ–≤ (–æ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç!)
   ```

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```javascript
// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Performance Optimizer
performanceOptimizer.getStats();
// { cachedImages: 15, prefetchQueue: 3, isMobile: true, ... }

// –†–∞–∑–º–µ—Ä Service Worker –∫—ç—à–∞
await serviceWorkerAPI.getCacheSize();
// { bytes: 5242880, mb: "5.00" }

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
logger.getStats();
// { errors: 0, warnings: 2, mode: 'production', ... }

// –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à —Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç
performanceOptimizer.clearOldCache();
```

---

## –ù–ê–°–¢–†–û–ô–ö–ê –ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∂–∞—Ç–∏—è

**`performance-optimizer.js`:lines 18-25**
```javascript
this.config = {
    prefetchDistance: 3,  // –°–∫–æ–ª—å–∫–æ —Ä–µ–≥–∏–æ–Ω–æ–≤ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞—Ç—å
    thumbSize: { width: 400, height: 300, quality: 0.7 },
    mobileSize: { width: 800, height: 600, quality: 0.75 },
    desktopSize: { width: 1200, height: 900, quality: 0.8 },
    loadTimeout: 3000,     // –ú–∞–∫—Å. –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
    concurrentLoads: 4     // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
};
```

### –õ–∏–º–∏—Ç—ã Service Worker –∫—ç—à–∞

**`service-worker.js`:lines 15-19**
```javascript
const MAX_CACHE_SIZE = {
    static: 50,    // CSS, JS —Ñ–∞–π–ª–æ–≤
    dynamic: 100,  // HTML —Å—Ç—Ä–∞–Ω–∏—Ü
    images: 200    // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
};
```

### –í–∫–ª—é—á–µ–Ω–∏–µ Debug –ª–æ–≥–æ–≤ –≤ Production

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
logger.toggleDebug();  // –í–∫–ª—é—á–∏—Ç—å debug
// ‚Üí Debug mode: –í–ö–õ–Æ–ß–ï–ù

// –ò–ª–∏ —á–µ—Ä–µ–∑ localStorage:
localStorage.setItem('debugMode', 'true');
location.reload();
```

---

## BEST PRACTICES

### 1. –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
```html
<!-- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û! -->
1. logger.js          ‚Üê –ü–µ—Ä–≤—ã–º (–ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–≥–∏)
2. performance-optimizer.js
3. sw-register.js
4. –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã...
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –Ω–æ–≤–æ–º –∫–æ–¥–µ
```javascript
// –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
if (window.performanceOptimizer) {
    performanceOptimizer.loadImageInstantly(url, img, 'normal');
} else {
    img.src = url;  // Fallback
}

// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç:
performanceOptimizer.prefetchImages([url1, url2, url3]);
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```javascript
// –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ console.log –Ω–∞–ø—Ä—è–º—É—é!
window.log('Debug');       // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
console.log('Debug');      // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–µ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è)
```

---

## –£–°–¢–†–ê–ù–ï–ù–ò–ï –ù–ï–ü–û–õ–ê–î–û–ö

### Service Worker –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞:
navigator.serviceWorker.getRegistrations()
    .then(regs => console.log('Registrations:', regs));

// –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞:
await serviceWorkerAPI.clearCache();
navigator.serviceWorker.getRegistrations()
    .then(regs => regs.forEach(reg => reg.unregister()));
location.reload();
```

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞:
caches.open('matryoshka-v3.0-images')
    .then(cache => cache.keys())
    .then(keys => console.log('Cached images:', keys.length));

// –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞:
performanceOptimizer.clearOldCache();
location.reload();
```

### –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –∫—ç—à
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞:
const size = await serviceWorkerAPI.getCacheSize();
if (size.mb > 100) {
    // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫—ç—à
    await serviceWorkerAPI.clearCache();
}
```

---

## ROADMAP

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

- [ ] HTTP/2 Server Push –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- [ ] WebAssembly –¥–ª—è ultra-fast —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] IndexedDB quota management (–∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞)
- [ ] Adaptive loading (—Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è 2G/3G/4G)
- [ ] Background Sync –¥–ª—è –æ—Ñ–ª–∞–π–Ω-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
- [ ] Prerendering —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

---

## –ú–ò–ì–†–ê–¶–ò–Ø –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –ö–û–î–ê

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

```javascript
// –°—Ç–∞—Ä—ã–π –∫–æ–¥:
const img = document.createElement('img');
img.src = region.image;

// –ù–æ–≤—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π:
const img = document.createElement('img');
if (window.performanceOptimizer) {
    performanceOptimizer.loadImageInstantly(region.image, img, 'normal');
} else {
    img.src = region.image;
}
```

---

## –ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `logger.getStats()` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å SW: `serviceWorkerAPI.getStatus()`
4. –í–∫–ª—é—á–∏—Ç–µ debug: `logger.toggleDebug()`

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- –í—Ä–µ–º—è –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏: **15x —É–ª—É—á—à–µ–Ω–∏–µ**
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **10x —É–ª—É—á—à–µ–Ω–∏–µ**
- –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞: **80%**
- –û—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º: **100% —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**

üöÄ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é —Å–≤–µ—Ç–∞!**
