# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Supabase –¥–ª—è –ª–µ–Ω—Ç—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π

## –®–∞–≥ 1: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ [supabase.com](https://supabase.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Table Editor** (–∏–∫–æ–Ω–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —Å–ª–µ–≤–∞)
3. –£–¥–∞–ª–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
   - `posts` - –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–æ–µ—Ç–æ—á–∏–µ ‚Üí Delete table
   - `qr_codes` - –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–æ–µ—Ç–æ—á–∏–µ ‚Üí Delete table
   - –î—Ä—É–≥–∏–µ —Ç–∞–±–ª–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –Ω–µ –Ω—É–∂–Ω—ã (–∫—Ä–æ–º–µ `users`)

> **–í–∞–∂–Ω–æ:** –¢–∞–±–ª–∏—Ü—É `users` –æ—Å—Ç–∞–≤—å—Ç–µ - –æ–Ω–∞ –Ω—É–∂–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö!

---

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã `travel_feed`

1. –í **Table Editor** –Ω–∞–∂–º–∏—Ç–µ **New table**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –Ω–∏–∂–µ –≤ **SQL Editor** (–∏–∫–æ–Ω–∫–∞ </> —Å–ª–µ–≤–∞):

```sql
-- –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –ª–µ–Ω—Ç—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π
CREATE TABLE travel_feed (
  id BIGSERIAL PRIMARY KEY,
  telegram_id BIGINT NOT NULL,
  username TEXT,
  photo_url TEXT NOT NULL,
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
CREATE INDEX idx_travel_feed_telegram_id ON travel_feed(telegram_id);

-- –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–µ
CREATE INDEX idx_travel_feed_created_at ON travel_feed(created_at DESC);

-- –í–∫–ª—é—á–∞–µ–º Row Level Security (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
ALTER TABLE travel_feed ENABLE ROW LEVEL SECURITY;

-- –ü–æ–ª–∏—Ç–∏–∫–∞: –≤—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å
CREATE POLICY "–í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –ª–µ–Ω—Ç—É"
  ON travel_feed
  FOR SELECT
  USING (true);

-- –ü–æ–ª–∏—Ç–∏–∫–∞: –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å
CREATE POLICY "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–æ—Ç–æ"
  ON travel_feed
  FOR INSERT
  WITH CHECK (true);

-- –ü–æ–ª–∏—Ç–∏–∫–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏
CREATE POLICY "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏"
  ON travel_feed
  FOR DELETE
  USING (true);
```

3. –ù–∞–∂–º–∏—Ç–µ **Run** –∏–ª–∏ `Ctrl+Enter`

---

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Storage –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

### 3.1. –°–æ–∑–¥–∞–Ω–∏–µ bucket –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Storage** (–∏–∫–æ–Ω–∫–∞ –ø–∞–ø–∫–∏ —Å–ª–µ–≤–∞)
2. –ù–∞–∂–º–∏—Ç–µ **New bucket**
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: `travel-photos`
4. **Public bucket:** ‚úÖ –≤–∫–ª—é—á–∏—Ç–µ (—á—Ç–æ–±—ã —Ñ–æ—Ç–æ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ)
5. –ù–∞–∂–º–∏—Ç–µ **Create bucket**

### 3.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ Storage

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è bucket –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Policies**:

1. **–ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ (Upload):**
   - –ù–∞–∂–º–∏—Ç–µ **New policy**
   - –í—ã–±–µ—Ä–∏—Ç–µ **For full customization**
   - Policy name: `–í—Å–µ –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ`
   - Allowed operation: `INSERT`
   - Target roles: `public`
   - Policy definition:
     ```sql
     true
     ```
   - –ù–∞–∂–º–∏—Ç–µ **Review** ‚Üí **Save policy**

2. **–ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è (Select):**
   - –ù–∞–∂–º–∏—Ç–µ **New policy**
   - Policy name: `–í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å —Ñ–æ—Ç–æ`
   - Allowed operation: `SELECT`
   - Target roles: `public`
   - Policy definition:
     ```sql
     true
     ```
   - –ù–∞–∂–º–∏—Ç–µ **Review** ‚Üí **Save policy**

3. **–ü–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (Delete):**
   - –ù–∞–∂–º–∏—Ç–µ **New policy**
   - Policy name: `–í—Å–µ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å`
   - Allowed operation: `DELETE`
   - Target roles: `public`
   - Policy definition:
     ```sql
     true
     ```
   - –ù–∞–∂–º–∏—Ç–µ **Review** ‚Üí **Save policy**

---

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:

‚úÖ –¢–∞–±–ª–∏—Ü–∞ `users` (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚úÖ –¢–∞–±–ª–∏—Ü–∞ `travel_feed` (–¥–ª—è –ª–µ–Ω—Ç—ã)
‚úÖ Storage bucket `travel-photos` (–¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π)
‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

## –®–∞–≥ 5: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π –¥–æ—Å—Ç—É–ø–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API** (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ —Å–ª–µ–≤–∞)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Project URL** - —ç—Ç–æ –≤–∞—à `SUPABASE_URL`
   - **anon public** –∫–ª—é—á - —ç—Ç–æ –≤–∞—à `SUPABASE_KEY`

3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø—Ä–æ–µ–∫—Ç–µ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```env
SUPABASE_URL=https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.supabase.co
SUPABASE_KEY=–≤–∞—à-anon-public-–∫–ª—é—á
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ:

- **`users`** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram
- **`travel_feed`** - –ª–µ–Ω—Ç–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ (—Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ URL)
- **Storage `travel-photos`** - —Å–∞–º–∏ —Ñ–∞–π–ª—ã —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –≤ –±–æ—Ç
2. –ë–æ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ –≤ **Supabase Storage** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç URL
3. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ **travel_feed** —Å —ç—Ç–∏–º URL
4. –§—Ä–æ–Ω—Ç–µ–Ω–¥ —á–∏—Ç–∞–µ—Ç `travel_feed` –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ç–æ –ø–æ URL

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ `travel_feed`:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | —á–∏—Å–ª–æ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π ID –∑–∞–ø–∏—Å–∏ |
| telegram_id | —á–∏—Å–ª–æ | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram |
| username | —Ç–µ–∫—Å—Ç | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, @username) |
| photo_url | —Ç–µ–∫—Å—Ç | –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ –≤ Storage |
| description | —Ç–µ–∫—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| created_at | –≤—Ä–µ–º—è | –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) |

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤

–í **Storage** ‚Üí **travel-photos** ‚Üí **Configuration**:
- File size limit: `5 MB` (–∏–ª–∏ –ª—é–±–æ–π —Ä–∞–∑–º–µ—Ä)
- Allowed MIME types: `image/jpeg, image/png, image/webp`
