<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ–º–æ: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ö–∞—Ä—Ç–∞ —Å –ö–∞—Ä—Ç–æ—á–∫–∞–º–∏ 2–ì–ò–°</title>
    <link rel="stylesheet" href="maps/maps2gis_new.css">
    <link rel="stylesheet" href="maps/organization_card.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
        }
        .demo-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .demo-header h1 {
            margin: 0;
        }
        #demoMapContainer {
            width: 100%;
            height: calc(100vh - 80px);
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>üó∫Ô∏è –î–µ–º–æ: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ö–∞—Ä—Ç–∞ 2–ì–ò–° –ú–æ—Å–∫–≤–∞</h1>
        <p>–í–≤–µ–¥–∏—Ç–µ –≤ –ø–æ–∏—Å–∫ "–∫–∞—Ñ–µ", "—Ä–µ—Å—Ç–æ—Ä–∞–Ω" –∏–ª–∏ "–º—É–∑–µ–π" –∏ –∫–ª–∏–∫–∞–π—Ç–µ –ø–æ –º–∞—Ä–∫–µ—Ä–∞–º!</p>
    </div>

    <div id="demoMapContainer"></div>

    <!-- MapGL API -->
    <script src="https://mapgl.2gis.com/api/js/v1"></script>

    <!-- –ù–∞—à–∏ –º–æ–¥—É–ª–∏ -->
    <script src="maps/organization_card.js"></script>
    <script src="maps/maps2gis_new.js"></script>

    <script>
        // –î–∞–Ω–Ω—ã–µ –ú–æ—Å–∫–≤—ã
        const moscowData = {
            id: 'moscow',
            name: '–ú–æ—Å–∫–≤–∞',
            attractions: []
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', async () => {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ –¥–µ–º–æ –∫–∞—Ä—Ç—ã');

            if (!window.matryoshka2GIS) {
                console.error('‚ùå –ú–æ–¥—É–ª—å –∫–∞—Ä—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                document.getElementById('demoMapContainer').innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white;">
                        <div style="text-align: center;">
                            <h2>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è –∫–∞—Ä—Ç</h2>
                            <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞</p>
                        </div>
                    </div>
                `;
                return;
            }

            try {
                // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É
                await window.matryoshka2GIS.createMap(moscowData, 'demoMapContainer');
                console.log('‚úÖ –ö–∞—Ä—Ç–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!');
                console.log('üí° –í–≤–µ–¥–∏—Ç–µ "–∫–∞—Ñ–µ" –≤ –ø–æ–∏—Å–∫ –∏ –Ω–∞–∂–º–∏—Ç–µ Enter');
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç—ã:', error);
                document.getElementById('demoMapContainer').innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white;">
                        <div style="text-align: center;">
                            <h2>‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç—ã</h2>
                            <p>${error.message}</p>
                            <pre style="background: rgba(0,0,0,0.5); padding: 20px; border-radius: 8px; text-align: left; overflow: auto;">
${error.stack}
                            </pre>
                        </div>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
