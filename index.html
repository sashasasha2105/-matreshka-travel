<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="color-scheme" content="dark">
    <meta name="theme-color" content="#0f0520">
    <meta name="description" content="–ú–∞—Ç—Ä–µ—à–∫–∞ - –æ—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –∫—Ä–∞—Å–æ—Ç—É –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –†–æ—Å—Å–∏–∏. –ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π—Ç–µ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º, –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è, –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã.">
    <title>–ú–∞—Ç—Ä–µ—à–∫–∞ - –ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π –ø–æ –†–æ—Å—Å–∏–∏</title>


    <!-- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏ -->
    <link rel="stylesheet" href="profile/profile.css?v=999">
    <link rel="stylesheet" href="feed/feed.css?v=999">
    <link rel="stylesheet" href="quests/quests.css?v=999">
    <link rel="stylesheet" href="qr/qr.css?v=999">
    <link rel="stylesheet" href="maps/maps2gis_new.css?v=999">

    <!-- üöÄ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô CSS –ó–ê–ì–†–£–ñ–ê–ï–¢–°–Ø –ü–û–°–õ–ï–î–ù–ò–ú - Russian Heritage Theme -->
    <link rel="stylesheet" href="styles/matreshka-optimized.css?v=999">

    <!-- üé® ACETERNITY UI + LIQUID GLASS EFFECTS -->
    <link rel="stylesheet" href="styles/aceternity-effects.css?v=999">
    <link rel="stylesheet" href="styles/liquid-glass.css?v=999">

    <!-- üèõÔ∏è PREMIUM REGION DETAILS STYLES -->
    <link rel="stylesheet" href="styles/region-details-premium.css?v=999">

    <!-- üé† MARQUEE HERO STYLES -->
    <link rel="stylesheet" href="styles/marquee-hero.css?v=999">

    <!-- Premium Date Picker Styles -->
    <link rel="stylesheet" href="components/TripDatePicker/TripDatePickerSection.css">

    <!-- Minimal Focus Cards Styles -->
    <link rel="stylesheet" href="styles/focus-cards-minimal.css">

    <!-- üçé Apple Cards Carousel Styles -->
    <link rel="stylesheet" href="styles/apple-cards-carousel.css">

    <!-- üçé Package Modal Minimal Styles -->
    <link rel="stylesheet" href="styles/package-modal-minimal.css">

    <!-- üé® Animated Tooltip Styles -->
    <link rel="stylesheet" href="styles/animated-tooltip.css">

    <!-- üîç Search Minimal Styles -->
    <link rel="stylesheet" href="styles/search-minimal.css">

    <!-- üÉè Card Stack Styles -->
    <link rel="stylesheet" href="styles/card-stack.css">

    <!-- üè™ Partner Cards Minimal Styles -->
    <link rel="stylesheet" href="styles/partner-cards-minimal.css">

    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js" async defer></script>

    <!-- Performance Optimizer - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <script src="scripts/components/performance-optimizer.js" defer></script>

    <script src="scripts/core/navigation.js" defer></script>
    <script src="scripts/core/modal-manager.js" defer></script>
    <script src="scripts/core/storage.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ä–µ–≥–∏–æ–Ω–∞–º–∏ -->
        <div id="mainSection">
            <!-- üé† 3D Marquee Hero Section -->
            <section class="marquee-hero-section">
                <div class="marquee-demo-wrapper">
                    <div class="marquee-container-main">
                        <div class="marquee-grid-main" id="marqueeGridMain">
                            <!-- –ö–æ–ª–æ–Ω–∫–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–æ–±–∞–≤—è—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>

                        <!-- –¢–µ–∫—Å—Ç –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—É—Å–µ–ª–∏ -->
                        <div class="marquee-overlay-text">
                            <h1 class="marquee-overlay-title">
                                –ò—Å—Å–ª–µ–¥—É–π—Ç–µ<br>–†–æ—Å—Å–∏—é
                            </h1>
                            <p class="marquee-overlay-subtitle">–≤–º–µ—Å—Ç–µ —Å –ú–∞—Ç—Ä–µ—à–∫–æ–π</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- üé® Premium Date Picker Section -->
            <div class="date-picker-section">
                <h2 class="date-picker-title">üìÖ –í—ã–±–æ—Ä –¥–∞—Ç</h2>
                <div id="premiumDatePicker"></div>
            </div>

            <!-- –ü–æ–∏—Å–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤ -->
            <div class="search-section" data-animate>
                <div class="search-container">
                    <div class="search-icon">üîç</div>
                    <input
                        type="text"
                        id="regionSearch"
                        class="search-input"
                        placeholder="–ù–∞–π—Ç–∏ —Ä–µ–≥–∏–æ–Ω –∏–ª–∏ –≥–æ—Ä–æ–¥..."
                        oninput="searchRegions(this.value)"
                        autocomplete="off"
                    >
                    <button class="search-clear" onclick="clearSearch()" style="display: none;">‚úï</button>
                </div>
            </div>

            <!-- üéØ Minimal Focus Cards - —Å—Ç–∏–ª—å date picker -->
            <section class="regions-section">
                <div id="regionsGrid"></div>
            </section>

            <!-- üçé Apple Cards Carousel - –ì–æ—Ç–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π -->
            <div id="applePackagesCarousel"></div>

            <!-- üî• –£–î–ê–õ–ï–ù–û: –õ–µ–Ω—Ç–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π —Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –Ω–∏–∂–Ω—é—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é) -->
        </div>

        <!-- –î–µ—Ç–∞–ª–∏ —Ä–µ–≥–∏–æ–Ω–∞ -->
        <div id="regionDetails" class="region-details">
            <div class="region-details-header">
                <button id="backBtn" class="back-btn">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
                <button class="user-profile-btn" onclick="showProfile()">
                    <div class="profile-icon">üë§</div>
                    <span class="profile-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </div>

            <!-- Breadcrumbs –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
            <nav class="breadcrumbs" id="breadcrumbs" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
                <a href="#" class="breadcrumb-item" onclick="showMainSection(); return false;">–ì–ª–∞–≤–Ω–∞—è</a>
                <span class="breadcrumb-separator">‚Ä∫</span>
                <span class="breadcrumb-item active" id="breadcrumbRegion">–†–µ–≥–∏–æ–Ω</span>
            </nav>

            <div class="region-header">
                <div class="region-title" id="regionTitle">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="region-subtitle" id="regionDescription">–ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è...</div>
            </div>

            <div class="region-image-container">
                <img id="regionImage" src="" alt="–§–æ—Ç–æ —Ä–µ–≥–∏–æ–Ω–∞" class="region-image" loading="lazy">
            </div>

            <div class="section">
                <h2 class="section-title"><span>‚ÑπÔ∏è</span> –û —Ä–µ–≥–∏–æ–Ω–µ</h2>
                <div class="section-content">
                    <p id="regionAbout" class="region-about">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...</p>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title"><span>üçΩÔ∏è</span> –ü–∞—Ä—Ç–Ω–µ—Ä—ã</h2>
                <div class="section-content">
                    <div id="partnersGrid" class="partners-grid">
                        <!-- –ü–∞—Ä—Ç–Ω–µ—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title"><span>üó∫Ô∏è</span> –ö–∞—Ä—Ç–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤</h2>
                <div class="section-content">
                    <div id="mapContainer" class="map-container">
                        <div class="map-placeholder">
                            <p class="map-text">–î–∞–ª—å–Ω–µ–π—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Y.api</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title"><span>üèõÔ∏è</span> –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
                <div class="section-content">
                    <ul id="attractionsList" class="attractions-list">
                        <!-- –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                    </ul>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div id="profileSection" class="profile-section" style="display: none;">
            <button id="profileBackBtn" class="back-btn">
                ‚Üê –ù–∞–∑–∞–¥
            </button>

            <div class="profile-content">
                <!-- –°—é–¥–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å -->
            </div>
        </div>

        <!-- –ö–æ—Ä–∑–∏–Ω–∞ (–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏) -->
        <div id="cartSection" class="cart-section" style="display: none;">
            <button id="cartBackBtn" class="back-btn">
                ‚Üê –ù–∞–∑–∞–¥
            </button>

            <div class="cart-content">
                <!-- –°—é–¥–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∫–æ—Ä–∑–∏–Ω–∞ -->
            </div>
        </div>

        <!-- –ó–∞–¥–∞–Ω–∏—è -->
        <div id="questsSection" class="quests-section" style="display: none;">
            <button id="questsBackBtn" class="back-btn">
                ‚Üê –ù–∞–∑–∞–¥
            </button>

            <div class="quests-content">
                <!-- –°—é–¥–∞ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∑–∞–¥–∞–Ω–∏—è -->
            </div>
        </div>

        <!-- –ü–æ–ª–Ω–∞—è –ª–µ–Ω—Ç–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <div id="fullFeedContainer" style="display: none; min-height: 100vh; padding-bottom: 100px;">
            <!-- –°—é–¥–∞ –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –ø–æ–ª–Ω–∞—è –ª–µ–Ω—Ç–∞ -->
        </div>

        <!-- –õ–æ–∞–¥–µ—Ä -->
        <div id="loader" class="loader">
            <div class="loader-spinner"></div>
            <div id="loaderText" class="loader-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <!-- üé® –°–µ–∫—Ü–∏—è –ö–æ–º–∞–Ω–¥–∞ - Animated Tooltip -->
        <div class="team-section" data-animate>
            <div class="team-header">
                <h2 class="team-title">
                    <span class="team-icon">üë•</span>
                    –ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞
                </h2>
            </div>
            <div id="animatedTooltipContainer"></div>
        </div>

        <div class="footer">
            ¬© 2025 –ú–∞—Ç—Ä–µ—à–∫–∞ ‚Äî –ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π –ø–æ –†–æ—Å—Å–∏–∏ üá∑üá∫
        </div>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav" id="bottomNav">
        <button class="nav-item" onclick="showMainSection()" data-page="main">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
        </button>
        <button class="nav-item" onclick="showFeed()" data-page="feed">
            <div class="nav-icon">üåç</div>
            <div class="nav-label">–õ–µ–Ω—Ç–∞</div>
        </button>
        <button class="nav-item" onclick="showProfile()" data-page="profile">
            <div class="nav-icon">üë§</div>
            <div class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </button>
        <button class="nav-item" onclick="showQuests()" data-page="quests">
            <div class="nav-icon">üéØ</div>
            <div class="nav-label">–ó–∞–¥–∞–Ω–∏—è</div>
            <span class="quests-badge" id="questsBadge">0</span>
        </button>
        <button class="nav-item" onclick="showCart()" data-page="cart">
            <div class="nav-icon">üõí</div>
            <div class="nav-label">–ö–æ—Ä–∑–∏–Ω–∞</div>
            <span class="cart-badge" id="cartBadge">0</span>
        </button>
    </nav>

    <script>
        // –ò–º–∏—Ç–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ addToGlobalFeed (–±–µ–∑ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π)
        if (typeof window.addToGlobalFeed !== 'function') {
            window.addToGlobalFeed = function(travel) {
                console.log('üåü –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ª–µ–Ω—Ç—É:', travel);
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞—Ç –ø–æ–µ–∑–¥–∫–∏
        function saveTravelDates() {
            const startDate = document.getElementById('travelStartDate').value;
            const endDate = document.getElementById('travelEndDate').value;

            if (!startDate || !endDate) {
                showToast('‚ùó –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–µ –¥–∞—Ç—ã', 3000);
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –Ω–µ —Ä–∞–Ω—å—à–µ –Ω–∞—á–∞–ª–∞
            if (new Date(endDate) < new Date(startDate)) {
                showToast('‚ùó –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞', 3000);
                return;
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('travelDates', JSON.stringify({
                startDate: startDate,
                endDate: endDate,
                savedAt: new Date().toISOString()
            }));

            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const startFormatted = new Date(startDate).toLocaleDateString('ru-RU', { day: 'numeric', month: 'long' });
            const endFormatted = new Date(endDate).toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });

            showToast(`‚úÖ –î–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: ${startFormatted} - ${endFormatted}`, 4000);
            console.log('üìÖ –î–∞—Ç—ã –ø–æ–µ–∑–¥–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã:', { startDate, endDate });
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ø–æ–∏—Å–∫–∞
        function clearSearch() {
            const searchInput = document.getElementById('regionSearch');
            const clearBtn = document.querySelector('.search-clear');
            searchInput.value = '';
            clearBtn.style.display = 'none';
            searchRegions('');
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
        function updateSearchUI() {
            const searchInput = document.getElementById('regionSearch');
            const clearBtn = document.querySelector('.search-clear');
            if (searchInput.value.trim()) {
                clearBtn.style.display = 'block';
            } else {
                clearBtn.style.display = 'none';
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('regionSearch');
            if (searchInput) {
                searchInput.addEventListener('input', updateSearchUI);
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã
            const savedDates = localStorage.getItem('travelDates');
            if (savedDates) {
                try {
                    const dates = JSON.parse(savedDates);
                    document.getElementById('travelStartDate').value = dates.startDate;
                    document.getElementById('travelEndDate').value = dates.endDate;
                    console.log('üìÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã:', dates);
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—Ç:', e);
                }
            }
        });
    </script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π MapGL API -->
    <script src="https://mapgl.2gis.com/api/js/v1" async defer></script>

    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js" async defer></script>

    <!-- üé® GSAP –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π + Draggable –¥–ª—è liquid glass -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/Draggable.min.js"></script>

    <!-- –¢–û–õ–¨–ö–û –ö–†–ò–¢–ò–ß–ù–´–ï –î–õ–Ø –ì–õ–ê–í–ù–û–ô -->
    <script src="assets/data/regions.js"></script>
    <script src="assets/data/packages.js"></script>
    <script src="scripts/modules/packages.js" defer></script>
    <script src="scripts/script.js" defer></script>
    <script src="cart/cart.js" defer></script>

    <!-- –û–°–¢–ê–õ–¨–ù–´–ï –ì–†–£–ó–Ø–¢–°–Ø –ü–û –¢–†–ï–ë–û–í–ê–ù–ò–Æ -->
    <script src="qr/qr.js" defer></script>
    <script src="maps/maps2gis_new.js" defer></script>
    <script src="profile/profile.js" defer></script>
    <script src="feed/feed.js" defer></script>
    <script src="quests/quests.js" defer></script>

    <!-- üé® LIQUID GLASS + ACETERNITY EFFECTS -->
    <script src="scripts/liquid-glass.js" defer></script>

    <!-- üé† Marquee Hero Script -->
    <script src="scripts/marquee-hero.js" defer></script>

    <!-- üé® Premium Date Picker Script -->
    <script src="scripts/date-picker-premium.js"></script>

    <!-- üéØ Minimal Focus Cards Script -->
    <script src="scripts/focus-cards-minimal.js"></script>

    <!-- üçé Apple Cards Carousel Script -->
    <script src="scripts/apple-cards-carousel.js"></script>

    <!-- üé® Animated Tooltip Script -->
    <script src="scripts/animated-tooltip.js"></script>

    <!-- üÉè Card Stack Script -->
    <script src="scripts/card-stack.js"></script>

    <!-- SVG –§–ò–õ–¨–¢–†–´ –î–õ–Ø LIQUID GLASS –≠–§–§–ï–ö–¢–ê -->
    <svg class="sr-only" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <!-- GOO FILTER (–∂–∏–¥–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç) -->
            <filter id="goo">
                <feGaussianBlur result="blur" in="SourceGraphic" stdDeviation="13"></feGaussianBlur>
                <feColorMatrix
                    result="matrix"
                    in="blur"
                    values="
                        1 0 0 0 0
                        0 1 0 0 0
                        0 0 1 0 0
                        0 0 0 13 -10
                    "
                    type="matrix"
                ></feColorMatrix>
                <feComposite result="composite" in="matrix" operator="atop"></feComposite>
            </filter>

            <!-- KNOCKOUT FILTER (–º–∞—Å–∫–∞) -->
            <filter id="knockout" colorInterpolationFilters="sRGB">
                <feColorMatrix
                    result="knocked"
                    type="matrix"
                    values="1 0 0 0 0
                            0 1 0 0 0
                            0 0 1 0 0
                            -1 -1 -1 1 0"
                />
                <feComponentTransfer>
                    <feFuncR type="linear" slope="3" intercept="-1" />
                    <feFuncG type="linear" slope="3" intercept="-1" />
                    <feFuncB type="linear" slope="3" intercept="-1" />
                </feComponentTransfer>
                <feComponentTransfer>
                    <feFuncR type="table" tableValues="0 0 0 0 0 1 1 1 1 1" />
                    <feFuncG type="table" tableValues="0 0 0 0 0 1 1 1 1 1" />
                    <feFuncB type="table" tableValues="0 0 0 0 0 1 1 1 1 1" />
                </feComponentTransfer>
            </filter>

            <!-- REMOVE BLACK FILTER (—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≥–æ) -->
            <filter id="remove-black" color-interpolation-filters="sRGB">
                <feColorMatrix
                    type="matrix"
                    values="1 0 0 0 0
                              0 1 0 0 0
                              0 0 1 0 0
                              -255 -255 -255 0 1"
                    result="black-pixels"
                />
                <feMorphology
                    in="black-pixels"
                    operator="dilate"
                    radius="0.5"
                    result="smoothed"
                />
                <feComposite in="SourceGraphic" in2="smoothed" operator="out" />
            </filter>
        </defs>
    </svg>

    <!-- üé® –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø PREMIUM DATE PICKER -->
    <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Premium Date Picker –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üé® –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Premium Date Picker...');

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
        const premiumDatePicker = new PremiumDatePicker({
            containerId: 'premiumDatePicker',
            title: '',
            buttonText: '–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã',
            showEndDate: true,
            onDateSelect: (startDate, endDate) => {
                console.log('‚úÖ –î–∞—Ç—ã –≤—ã–±—Ä–∞–Ω—ã:', { startDate, endDate });

                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
                localStorage.setItem('matreshka_trip_dates', JSON.stringify({
                    startDate,
                    endDate,
                    timestamp: Date.now()
                }));

                // –í—ã–∑–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
                if (typeof saveTravelDates === 'function') {
                    saveTravelDates(startDate, endDate);
                }

                console.log('üíæ –î–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');
            }
        });

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        try {
            const savedDates = localStorage.getItem('matreshka_trip_dates');
            if (savedDates) {
                const { startDate, endDate, timestamp } = JSON.parse(savedDates);

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–∞—Ç—ã –Ω–µ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
                const daysSinceSelection = (Date.now() - timestamp) / (1000 * 60 * 60 * 24);
                if (daysSinceSelection < 30) {
                    premiumDatePicker.setDates(startDate, endDate);
                    console.log('üì¶ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã');
                } else {
                    console.log('‚è∞ –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã —É—Å—Ç–∞—Ä–µ–ª–∏');
                }
            }
        } catch (e) {
            console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—Ç:', e);
        }

        // –î–µ–ª–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
        window.premiumDatePicker = premiumDatePicker;

        console.log('‚úÖ Premium Date Picker –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    });

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
    function saveTravelDates(startDate, endDate) {
        console.log('üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞—Ç:', { startDate, endDate });

        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        // fetch('/api/save-dates', { ... });
    }
    </script>

    <!--
        üéØ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø MINIMAL FOCUS CARDS
        –¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ loadRegions() –≤ scripts/script.js
        –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (DOMContentLoaded)
    -->
</body>
</html>