<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ê–Ω–∞–ª–∏—Ç–∏–∫–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }
        .status {
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            background: #16213e;
        }
        .success { border-left: 4px solid #4caf50; }
        .error { border-left: 4px solid #f44336; }
        .info { border-left: 4px solid #2196f3; }
        button {
            padding: 15px 30px;
            font-size: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            transform: scale(1.05);
        }
        #console {
            background: #0f0f23;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log { margin: 5px 0; }
        .log.success { color: #4caf50; }
        .log.error { color: #f44336; }
        .log.info { color: #2196f3; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –ë–æ—Ç–∞</h1>

    <div class="status info">
        <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        <p><strong>–ë–æ—Ç:</strong> @Tracer2342332_bot</p>
        <p><strong>Chat ID:</strong> 1540847019</p>
        <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></p>
    </div>

    <div>
        <button onclick="testBotStart()">üìä –¢–µ—Å—Ç: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞</button>
        <button onclick="testLinkOpen()">üîó –¢–µ—Å—Ç: –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Å—ã–ª–∫–∏</button>
        <button onclick="testAction()">‚ö° –¢–µ—Å—Ç: –î–µ–π—Å—Ç–≤–∏–µ</button>
        <button onclick="clearConsole()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</button>
    </div>

    <div id="console"></div>

    <!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
    <script>
        window.ANALYTICS_CONFIG = {
            BOT_TOKEN: '7471119413:AAH8RHbU0dLSMSMRjgKS6yW4JoMBFp6ylFA',
            CHAT_ID: '1540847019',
            ENABLED: true,
            DEBUG: true
        };
    </script>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –∞–Ω–∞–ª–∏—Ç–∏–∫—É -->
    <script src="analytics.js"></script>
    <script src="analytics-integration.js"></script>

    <script>
        const consoleDiv = document.getElementById('console');
        const statusSpan = document.getElementById('status');

        function log(message, type = 'info') {
            const time = new Date().toLocaleTimeString('ru-RU');
            const logEntry = document.createElement('div');
            logEntry.className = `log ${type}`;
            logEntry.textContent = `[${time}] ${message}`;
            consoleDiv.appendChild(logEntry);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            console.log(message);
        }

        function clearConsole() {
            consoleDiv.innerHTML = '';
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
        if (window.matryoshkaAnalytics) {
            log('‚úÖ –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
            statusSpan.textContent = '‚úÖ –ì–æ—Ç–æ–≤';
            statusSpan.style.color = '#4caf50';
        } else {
            log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–¥—É–ª—è', 'error');
            statusSpan.textContent = '‚ùå –û—à–∏–±–∫–∞';
            statusSpan.style.color = '#f44336';
        }

        async function testBotStart() {
            log('üöÄ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞...', 'info');
            try {
                await window.matryoshkaAnalytics.trackBotStart();
                log('‚úÖ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram @Tracer2342332_bot', 'success');
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        async function testLinkOpen() {
            log('üîó –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—Å—ã–ª–∫–∏...', 'info');
            try {
                await window.matryoshkaAnalytics.trackLinkOpen(
                    'https://test.example.com',
                    'test',
                    '–¢–µ—Å—Ç–æ–≤–∞—è —Å—Å—ã–ª–∫–∞'
                );
                log('‚úÖ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram @Tracer2342332_bot', 'success');
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        async function testAction() {
            log('‚ö° –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è...', 'info');
            try {
                await window.matryoshkaAnalytics.trackAction(
                    '–¢–µ—Å—Ç–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ',
                    '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏'
                );
                log('‚úÖ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram @Tracer2342332_bot', 'success');
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏ fetch
        const originalFetch = window.fetch;
        window.fetch = async function(...args) {
            try {
                const response = await originalFetch.apply(this, args);
                if (args[0].includes('telegram')) {
                    const clone = response.clone();
                    const data = await clone.json();
                    if (data.ok) {
                        log(`‚úÖ Telegram API: ${data.result ? '–£—Å–ø–µ—à–Ω–æ' : 'OK'}`, 'success');
                    } else {
                        log(`‚ùå Telegram API: ${data.description}`, 'error');
                    }
                }
                return response;
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ fetch: ${error.message}`, 'error');
                throw error;
            }
        };
    </script>
</body>
</html>
